{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/background.js"],"names":["backgroundPage","AuraInspectorBackgroundPage","init","tabs","Map","external","_subscribers","labels","EXTERNAL_INSPECTOR_EXTENSION_IDS","BACKGROUND_KEY","chrome","i18n","getMessage","runtime","onConnect","addListener","BackgroundPage_OnConnect","bind","onConnectExternal","BackgroundPage_OnConnectExternal","onMessageExternal","BackgroundPage_OnMessageExternal","contextMenus","create","title","contexts","onclick","BackgroundPage_OnContextClick","subscribe","BackgroundPage_OnExternalMapToConnection","BackgroundPage_OnOpenTab","BackgroundPage_OnInjectContentScript","publish","key","data","callBackgroundPageSubscribers","callback","has","set","get","push","tabId","sender","externalPort","frameId","TabInfo","count","onUpdated","BackgroundPage_OnTabUpdated","tabInfo","addPanel","delete","url","executeScript","file","port","getTabId","onDisconnect","ContentScript_OnDisconnect","DevTools_OnDisconnect","onMessage","BackgroundPage_OnMessage","name","removePanel","hasPanels","removeListener","event","tab","id","devToolsIsOpen","passMessageToDevTools","action","alert","devtoolsNotif","message","i","length","type","sub","hasSubscription","addSubscription","queueFilter","console","warn","getAppVersion","serverUrl","Promise","resolve","reject","versionUrl","substring","indexOf","xhttp","XMLHttpRequest","onreadystatechange","readyState","status","idx","responseText","substr","open","send","changeInfo","sendMessage","queueMessage","forEach","apply","e","error","_subscriptions","Set","_panels","_queue","MAX_QUEUE_LENGTH","clear","size","panel","panelName","map","postMessage","shift","subscribeKey","add","predicate","filter"],"mappings":"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","file":"background.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","const backgroundPage = new AuraInspectorBackgroundPage();\nbackgroundPage.init();\n\nfunction AuraInspectorBackgroundPage() {\n    // Chrome Tabs\n    const tabs = new Map();\n    // Dev Tool Panels to send messages to\n    //var ports = new Map();\n    // Messages we are queuing up till the dev tools panel is launched.\n    //var stored = new Map();\n    // External Plugins connecting to the Aura Inspector\n    const external = new Map();\n\n    // Pub / Sub in the background script.\n    const _subscribers = new Map();\n\n    var labels;\n    // List of inspectors we want to pair with.\n    const EXTERNAL_INSPECTOR_EXTENSION_IDS = {\n        \"hmoenmfdbkbjcpiibpfakppdpahlfnpo\": true, // Dev Sfdc Inspector,\n        \"mmhofgmpfhjnekcfjelmdkjogjildhji\": true // Chrome Webstore Sfdc Inspector\n    };\n\n    const BACKGROUND_KEY = \"BackgroundPage:publish\";\n\n    this.init = function() {\n        labels = {\n            \"devtoolsNotif\": chrome.i18n.getMessage(\"open_devtools_notif\")\n        };\n\n        chrome.runtime.onConnect.addListener(BackgroundPage_OnConnect.bind(this));\n        chrome.runtime.onConnectExternal.addListener(BackgroundPage_OnConnectExternal.bind(this));\n        chrome.runtime.onMessageExternal.addListener(BackgroundPage_OnMessageExternal.bind(this));\n\n\n        // Consider tying this into the injected set, so we add the context to injected tabs.\n        // Might just need to change the documentUrlPatterns in that case.\n        chrome.contextMenus.create({\n            title: \"Inspect Lightning Component\",\n            contexts:[\"all\"],\n            onclick: BackgroundPage_OnContextClick.bind(this)\n\n            // Commented out the filter since most pages don't have .app in them anymore. \n            // Consider moving this into onConnect, and using the href of the page as the documentUrlPattern\n            // ,documentUrlPatterns: [\"*://*/*cmp*\", \"*://*/*app*\"]\n        });\n\n        // Add the external panels to the tabInfo collection.\n        this.subscribe(\"BackgroundPage:OnExternalMapToConnection\", BackgroundPage_OnExternalMapToConnection.bind(this));\n        this.subscribe(\"BackgroundPage:OpenTab\", BackgroundPage_OnOpenTab.bind(this));\n        this.subscribe(\"BackgroundPage:InjectContentScript\", BackgroundPage_OnInjectContentScript.bind(this));\n    };\n\n    /**\n     * Broadcast a message to JUST the background page.\n     *\n     * @param  {String} key MessageID to broadcast.\n     * @param  {Object} data any type of data to pass to the subscribe method.\n     */\n    this.publish = function(key, data) {\n        if(!key) { return; }\n\n        callBackgroundPageSubscribers(key, [data]);\n    };\n\n    /**\n     * Listen for a published message from JUST THE BACKGROUND PAGE.\n     *\n     * @param  {String} key Unique MessageId that would be broadcast through the system.\n     * @param  {Function} callback function to be executed when the message is published.\n     */\n    this.subscribe = function(key, callback) {\n        if(!_subscribers.has(key)) {\n            _subscribers.set(key, []);\n        }\n\n        _subscribers.get(key).push(callback);\n    };\n\n    function BackgroundPage_OnExternalMapToConnection(tabId, sender) {\n        const externalPort = external.get(sender.frameId);\n        if(externalPort) {\n            // This is the first one\n            if(TabInfo.count() === 0) {\n                chrome.tabs.onUpdated.addListener(BackgroundPage_OnTabUpdated);\n            }\n\n            const tabInfo = TabInfo.create(tabId);\n            tabInfo.addPanel(externalPort);\n            external.delete(sender.frameId);      \n\n            externalPort.tabId = tabId;              \n        }\n    }\n\n    function BackgroundPage_OnOpenTab(url, sender) {\n        chrome.tabs.create({\"url\": url});\n    }\n\n    function BackgroundPage_OnInjectContentScript(tabId, sender) {\n        chrome.tabs.executeScript(tabId, { file: \"dist/contentScript.js\" });\n    }\n\n    function BackgroundPage_OnConnect(port) {\n        // It is possible for some reason to not have a tab object from devToolPanels connecting.\n        var tabId = getTabId(port);\n\n        if(tabId !== -1) {\n\n            // This is the first one\n            if(TabInfo.count() === 0) {\n                chrome.tabs.onUpdated.addListener(BackgroundPage_OnTabUpdated);\n            }\n\n            // Content script (Chrome Tab)\n            TabInfo.create(tabId);\n            port.onDisconnect.addListener(ContentScript_OnDisconnect.bind(this));\n\n        } else {\n            port.onDisconnect.addListener(DevTools_OnDisconnect.bind(this));\n        }\n\n        port.onMessage.addListener(BackgroundPage_OnMessage.bind(this));\n\n        \n    }\n\n    // Nothing really to do that I can think of.\n    function ContentScript_OnDisconnect(port) {}\n\n    function DevTools_OnDisconnect(port) {\n        if(!port.name){\n            return; // Not sure why this would happen.\n        }\n\n        //var tab = port.sender.tab;\n        \n        // Delete the stored port on the tab\n        var tabInfo = TabInfo.get(port.tabId);\n        if(tabInfo) {\n            tabInfo.removePanel(port);\n\n            // Happens in removePanel now, if all the panels are cleared, it resets the subscriptions.\n            //tabInfo.subscriptions.clear();\n\n            // Don't just build up a bunch of messages for tabs that have been unloaded\n            if(!tabInfo.hasPanels()) {\n                // Chrome Tab\n                TabInfo.delete(port.tabId);\n\n                if(TabInfo.count() === 0) {\n                    chrome.tabs.onUpdated.removeListener(BackgroundPage_OnTabUpdated);\n                }\n\n            }\n        }\n        \n    }\n\n    function BackgroundPage_OnContextClick(event, tab) {\n        var tabInfo = TabInfo.get(tab.id);\n\n        var devToolsIsOpen = tabInfo && !!tabInfo.hasPanels();\n\n        passMessageToDevTools({\n            action  : \"AuraInspector:publish\",\n            key: \"AuraInspector:OnContextMenu\"\n        }, tab.id);\n\n        if(!devToolsIsOpen){\n            alert(labels.devtoolsNotif);\n        }\n    }\n\n    function BackgroundPage_OnMessage(message, port) {\n        // Should move to this.subscribe\n        if(message.subscribe){\n            var tabId = message.tabId;\n            var tabInfo = TabInfo.get(tabId);\n\n            // Tab doesn't exist.\n            // Can happen when you launch dev tools on dev tools.\n            if(!tabInfo) {\n                if(TabInfo.count() === 0) {\n                    chrome.tabs.onUpdated.addListener(BackgroundPage_OnTabUpdated);\n                }\n                \n                tabInfo = TabInfo.create(tabId);\n            }\n\n            tabInfo.addPanel(port);\n            port.tabId = tabId;\n\n            for(var i=0;i<message.subscribe.length;i++){\n                var type = message.subscribe[i];\n                var sub = tabInfo.hasSubscription(type);\n                if(!sub){\n                    tabInfo.addSubscription(type);\n                }\n            }\n\n            tabInfo.queueFilter(function(message) {\n                if(tabInfo.hasSubscription(message.action)) {\n                    passMessageToDevTools(message, tabId);\n                    return false;\n                }\n                return true;\n            });\n        } if(message.action === BACKGROUND_KEY) {\n            callBackgroundPageSubscribers(message.key, [message.data, port.sender]);\n        } else {\n            var tabId = getTabId(port);\n            if (tabId !== -1) {\n                passMessageToDevTools(message, tabId);\n            } else {\n                console.warn(\"unknown action or tabId\", message, tabId);\n            }\n        }\n    }\n\n    /**\n    *   get release version of the app from server\n    *   @param serverUrl url of server we are running chaos run against, like https://mobile1.t.salesforce.com/sfdc/releaseVersion.jsp\n    */\n    function getAppVersion(serverUrl) {\n            return new Promise((resolve, reject) => {\n                var versionUrl = \"\";\n                versionUrl = serverUrl.substring(serverUrl.indexOf(\"lightning.\")+\"lightning.\".length, serverUrl.indexOf(\"com\")+\"com\".length);\n                versionUrl = \"https://\" + versionUrl + \"/sfdc/releaseVersion.jsp\";\n                var xhttp = new XMLHttpRequest();\n                xhttp.onreadystatechange = function() {\n                    if (this.readyState == 4 && this.status == 200) {\n                         var idx = this.responseText.indexOf(\"AuraJarVersion\");\n                         if(idx>=0) {\n                            resolve(this.responseText.substr(idx, 21));\n                        } else {\n                            reject(\"no AuraJarVersion in response\");\n                        }\n                    }\n                };\n                xhttp.open(\"GET\", versionUrl, true);\n                xhttp.send();\n            });\n            \n    };\n\n\n    function BackgroundPage_OnMessageExternal(message, sender) {\n        \n        var tabId = message.tabId;\n        delete message.tabId;\n\n        // Communicate directly to the background script.\n        if(message.action === BACKGROUND_KEY) {\n            callBackgroundPageSubscribers(message.key, [message.data, sender]);\n        } else {\n            passMessageToDevTools(message, tabId);\n        }\n    }\n\n    function BackgroundPage_OnConnectExternal(port){\n        var id = port.sender.id;\n        var frameId = port.sender.frameId;\n\n        // Possibly a bit paranoid since they shouldn't be able to connect if we don't have their ID in the manifest\n        // But lets just be extra sure who we are communicating with.\n        if(EXTERNAL_INSPECTOR_EXTENSION_IDS[id]) {\n            external.set(frameId, port);\n            port.onDisconnect.addListener(DevTools_OnDisconnect.bind(this));\n        }\n    }\n\n    function BackgroundPage_OnTabUpdated(tabId, changeInfo, tab) {\n        // Only happens when we've attached to this tab before.\n        const tabInfo = TabInfo.get(tabId);\n        if(changeInfo.status === \"loading\" && tabInfo && tabInfo.hasPanels()) {\n            chrome.tabs.executeScript(tabId, { file: \"dist/contentScript.js\",  \"runAt\": \"document_start\"});\n        }\n    }\n\n    function passMessageToDevTools(message, tabId) {\n        var tabInfo = TabInfo.get(tabId);\n\n        // Should only happen when devtools are closed, and we don't care about this case.\n        if(!tabInfo) {\n            return;\n        }\n\n        //var subscriptions = tabInfo.subscriptions.has(message.action);\n        if(tabInfo.hasSubscription(message.action)){\n            tabInfo.sendMessage(message);\n        } else {\n            // Probably haven't subscribed to this yet, wait till we subscribe to the action then repeat it.\n            tabInfo.queueMessage(message);\n        }\n\n        // Send messages to other Inspector plugins connected to the Aura Inspector\n        // TODO: Won't work currently\n        // message.tabId = tabId;\n        // external.forEach(function(externalPort, key) {\n        //     chrome.runtime.sendMessage(key, message);\n        // });\n    }\n\n    function callBackgroundPageSubscribers(key, data) {\n        if(_subscribers.has(key)) {\n            _subscribers.get(key).forEach(function(callback){\n                try {\n                    callback.apply(null, data);\n                } catch(e) {\n                    console.error(e);\n                }\n            });\n        }\n    }\n\n    function getTabId(port) {\n        return port && port.sender && port.sender.tab ? port.sender.tab.id : -1;\n    }\n\n    function TabInfo(tabId) {\n        const _subscriptions = new Set();\n        const _panels = new Map();\n        var _queue = [];\n        var MAX_QUEUE_LENGTH = 100000;\n\n        // TODO: Should the external ports go in here?\n        this.addPanel = function(port) {\n            if(!port.name) { return; }\n            _panels.set(port.name, port);\n        };\n\n        this.removePanel = function(port) {\n            _panels.delete(port.name);\n\n            if(!this.hasPanels()) {\n                _subscriptions.clear();\n            }\n        };\n\n        this.hasPanels = function() {\n            return !!_panels.size;\n        };\n\n        // Sends a message to all the subscribed panels.\n        this.sendMessage = function(message) {\n            _panels.forEach(function(panel, panelName, map) {\n                //console.log(\"TabInfo:SendMessage\", message.key, message.data);\n\n                if(panel.sender && panel.sender.id !== chrome.runtime.id && EXTERNAL_INSPECTOR_EXTENSION_IDS[panel.sender.id]) {\n                    message.tabId = tabId;\n                    chrome.runtime.sendMessage(panel.sender.id, message);\n                    delete message.tabId;\n                } else {\n                    panel.postMessage(message)\n                }\n            });\n        };\n\n        this.queueMessage = function(message) {\n            _queue.push(message);\n\n            if(_queue.length > MAX_QUEUE_LENGTH) {\n                _queue.shift();\n            }\n        };\n\n        this.addSubscription = function(subscribeKey) {\n            _subscriptions.add(subscribeKey);\n\n            // TODO: Consider checking the queueMessage collection to see if it has anything\n            // and then pass those to sendMessage\n        };\n\n        this.hasSubscription = function(subscribeKey) {\n            return _subscriptions.has(subscribeKey);\n        };\n\n        this.queueFilter = function(predicate) {\n            _queue = _queue.filter(predicate);\n        };\n    }\n\n    TabInfo.create = function(tabId) {\n        var tabInfo = tabs.get(tabId);\n\n        if(!tabInfo){\n            tabInfo = new TabInfo(tabId);\n            tabs.set(tabId, tabInfo);\n        }\n        return tabInfo;\n    };\n\n    TabInfo.get = function(tabId) {\n        return tabs.get(tabId);\n    };\n\n    TabInfo.delete = function(tabId) {\n        tabs.delete(tabId);\n    };\n\n    TabInfo.count = function() {\n        return tabs.size;\n    };\n\n}   "],"sourceRoot":""}