!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};b.m=a,b.c=c,b.p="",b(0)}([function(a,b){"use strict";function c(){function a(a,b){var c=s.get(b.frameId);if(c){0===p.count()&&chrome.tabs.onUpdated.addListener(l);p.create(a).addPanel(c),s.delete(b.frameId),c.tabId=a}}function b(a,b){chrome.tabs.create({url:a})}function c(a,b){chrome.tabs.executeScript(a,{file:"dist/contentScript.js"})}function d(a){var b=o(a);-1!==b?(0===p.count()&&chrome.tabs.onUpdated.addListener(l),p.create(b),a.onDisconnect.addListener(e.bind(this))):a.onDisconnect.addListener(f.bind(this)),a.onMessage.addListener(h.bind(this))}function e(a){}function f(a){if(a.name){var b=p.get(a.tabId);b&&(b.removePanel(a),b.hasPanels()||(p.delete(a.tabId),0===p.count()&&chrome.tabs.onUpdated.removeListener(l)))}}function g(a,b){var c=p.get(b.id),d=c&&!!c.hasPanels();m({action:"AuraInspector:publish",key:"AuraInspector:OnContextMenu"},b.id),d||alert(q.devtoolsNotif)}function h(a,b){if(a.subscribe){var c=a.tabId,d=p.get(c);d||(0===p.count()&&chrome.tabs.onUpdated.addListener(l),d=p.create(c)),d.addPanel(b),b.tabId=c;for(var e=0;e<a.subscribe.length;e++){var f=a.subscribe[e];d.hasSubscription(f)||d.addSubscription(f)}d.queueFilter(function(a){return!d.hasSubscription(a.action)||(m(a,c),!1)})}if(a.action===v)n(a.key,[a.data,b.sender]);else if(a.chaos)i(a.chaos.serverUrl).then(function(b){a.chaos.data=b,a.chaos.key="AuraInspector:SendReleaseInfo",a.chaos.action="AuraInspector:publish",m(a.chaos,a.tabId)},function(a){console.warn("cannot get release version from server.",a)});else{var c=o(b);-1!==c?m(a,c):console.warn("unknown action or tabId",a,c)}}function i(a){return new Promise(function(b,c){var d="";d=a.substring(a.indexOf("lightning.")+"lightning.".length,a.indexOf("com")+"com".length),d="https://"+d+"/sfdc/releaseVersion.jsp";var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var a=this.responseText.indexOf("AuraJarVersion");a>=0?b(this.responseText.substr(a,21)):c("no AuraJarVersion in response")}},e.open("GET",d,!0),e.send()})}function j(a,b){var c=a.tabId;delete a.tabId,a.action===v?n(a.key,[a.data,b]):m(a,c)}function k(a){var b=a.sender.id,c=a.sender.frameId;u[b]&&(s.set(c,a),a.onDisconnect.addListener(f.bind(this)))}function l(a,b,c){var d=p.get(a);"loading"===b.status&&d&&d.hasPanels()&&chrome.tabs.executeScript(a,{file:"dist/contentScript.js",runAt:"document_start"})}function m(a,b){var c=p.get(b);c&&(c.hasSubscription(a.action)?c.sendMessage(a):c.queueMessage(a))}function n(a,b){t.has(a)&&t.get(a).forEach(function(a){try{a.apply(null,b)}catch(a){console.error(a)}})}function o(a){return a&&a.sender&&a.sender.tab?a.sender.tab.id:-1}function p(a){var b=new Set,c=new Map,d=[];this.addPanel=function(a){a.name&&c.set(a.name,a)},this.removePanel=function(a){c.delete(a.name),this.hasPanels()||b.clear()},this.hasPanels=function(){return!!c.size},this.sendMessage=function(b){c.forEach(function(c,d,e){c.sender&&c.sender.id!==chrome.runtime.id&&u[c.sender.id]?(b.tabId=a,chrome.runtime.sendMessage(c.sender.id,b),delete b.tabId):c.postMessage(b)})},this.queueMessage=function(a){d.push(a),d.length>1e5&&d.shift()},this.addSubscription=function(a){b.add(a)},this.hasSubscription=function(a){return b.has(a)},this.queueFilter=function(a){d=d.filter(a)}}var q,r=new Map,s=new Map,t=new Map,u={hmoenmfdbkbjcpiibpfakppdpahlfnpo:!0,mmhofgmpfhjnekcfjelmdkjogjildhji:!0},v="BackgroundPage:publish";this.init=function(){q={devtoolsNotif:chrome.i18n.getMessage("open_devtools_notif")},chrome.runtime.onConnect.addListener(d.bind(this)),chrome.runtime.onConnectExternal.addListener(k.bind(this)),chrome.runtime.onMessageExternal.addListener(j.bind(this)),chrome.contextMenus.create({title:"Inspect Lightning Component",contexts:["all"],onclick:g.bind(this),documentUrlPatterns:["*://*/*cmp*","*://*/*app*"]}),this.subscribe("BackgroundPage:OnExternalMapToConnection",a.bind(this)),this.subscribe("BackgroundPage:OpenTab",b.bind(this)),this.subscribe("BackgroundPage:InjectContentScript",c.bind(this))},this.publish=function(a,b){a&&n(a,[b])},this.subscribe=function(a,b){t.has(a)||t.set(a,[]),t.get(a).push(b)},p.create=function(a){var b=r.get(a);return b||(b=new p(a),r.set(a,b)),b},p.get=function(a){return r.get(a)},p.delete=function(a){r.delete(a)},p.count=function(){return r.size}}(new c).init()}]);