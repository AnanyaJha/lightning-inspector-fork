!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};b.m=a,b.c=c,b.p="",b(0)}([function(a,b){"use strict";!function(a){function b(){function a(a,b){var c=r.get(b.frameId);if(c){0===o.count()&&chrome.tabs.onUpdated.addListener(k);o.create(a).addPanel(c),r.delete(b.frameId),c.tabId=a}}function b(a,b){chrome.tabs.create({url:a})}function c(a,b){chrome.tabs.executeScript(a,{file:"src/contentScript.js"})}function d(a){var b=n(a);-1!==b?(0===o.count()&&chrome.tabs.onUpdated.addListener(k),o.create(b),a.onDisconnect.addListener(e.bind(this))):a.onDisconnect.addListener(f.bind(this)),a.onMessage.addListener(h.bind(this))}function e(a){}function f(a){if(a.name){var b=o.get(a.tabId);b&&(b.removePanel(a),b.hasPanels()||(o.delete(a.tabId),0===o.count()&&chrome.tabs.onUpdated.removeListener(k)))}}function g(a,b){var c=o.get(b.id),d=c&&!!c.hasPanels();l({action:"AuraInspector:publish",key:"AuraInspector:OnContextMenu"},b.id),d||alert(p.devtoolsNotif)}function h(a,b){if(a.subscribe){var c=a.tabId,d=o.get(c);d||(0===o.count()&&chrome.tabs.onUpdated.addListener(k),d=o.create(c)),d.addPanel(b),b.tabId=c;for(var e=0;e<a.subscribe.length;e++){var f=a.subscribe[e];d.hasSubscription(f)||d.addSubscription(f)}d.queueFilter(function(a){return!d.hasSubscription(a.action)||(l(a,c),!1)})}if(a.action===u)m(a.key,[a.data,b.sender]);else{var c=n(b);-1!==c&&l(a,c)}}function i(a,b){var c=a.tabId;delete a.tabId,a.action===u?m(a.key,[a.data,b]):l(a,c)}function j(a){var b=a.sender.id,c=a.sender.frameId;t[b]&&(r.set(c,a),a.onDisconnect.addListener(f.bind(this)))}function k(a,b,c){var d=o.get(a);"loading"===b.status&&d&&d.hasPanels()&&chrome.tabs.executeScript(a,{file:"src/contentScript.js",runAt:"document_start"})}function l(a,b){var c=o.get(b);c&&(c.hasSubscription(a.action)?c.sendMessage(a):c.queueMessage(a))}function m(a,b){s.has(a)&&s.get(a).forEach(function(a){try{a.apply(null,b)}catch(a){console.error(a)}})}function n(a){return a&&a.sender&&a.sender.tab?a.sender.tab.id:-1}function o(a){var b=new Set,c=new Map,d=[];this.addPanel=function(a){a.name&&c.set(a.name,a)},this.removePanel=function(a){c.delete(a.name),this.hasPanels()||b.clear()},this.hasPanels=function(){return!!c.size},this.sendMessage=function(b){c.forEach(function(c,d,e){c.sender&&c.sender.id!==chrome.runtime.id&&t[c.sender.id]?(b.tabId=a,chrome.runtime.sendMessage(c.sender.id,b),delete b.tabId):c.postMessage(b)})},this.queueMessage=function(a){d.push(a),d.length>1e5&&d.shift()},this.addSubscription=function(a){b.add(a)},this.hasSubscription=function(a){return b.has(a)},this.queueFilter=function(a){d=d.filter(a)}}var p,q=new Map,r=new Map,s=new Map,t={hmoenmfdbkbjcpiibpfakppdpahlfnpo:!0,mmhofgmpfhjnekcfjelmdkjogjildhji:!0},u="BackgroundPage:publish";this.init=function(){p={devtoolsNotif:chrome.i18n.getMessage("open_devtools_notif")},chrome.runtime.onConnect.addListener(d.bind(this)),chrome.runtime.onConnectExternal.addListener(j.bind(this)),chrome.runtime.onMessageExternal.addListener(i.bind(this)),chrome.contextMenus.create({title:"Inspect Lightning Component",contexts:["all"],onclick:g.bind(this),documentUrlPatterns:["*://*/*cmp*","*://*/*app*"]}),this.subscribe("BackgroundPage:OnExternalMapToConnection",a.bind(this)),this.subscribe("BackgroundPage:OpenTab",b.bind(this)),this.subscribe("BackgroundPage:InjectContentScript",c.bind(this))},this.publish=function(a,b){a&&m(a,[b])},this.subscribe=function(a,b){s.has(a)||s.set(a,[]),s.get(a).push(b)},o.create=function(a){var b=q.get(a);return b||(b=new o(a),q.set(a,b)),b},o.get=function(a){return q.get(a)},o.delete=function(a){q.delete(a)},o.count=function(){return q.size}}(new b).init()}()}]);